<app-sidebar></app-sidebar>
<app-topbar></app-topbar>

<div class="main-content mt-5">
  <div class="logout-container d-flex justify-content-end mb-3">
    <button class="btn btn-spotify d-flex align-items-center" (click)="logoutFromSpotify()">
      <i class='bx bxl-spotify bx-sm'></i>
      <span class="ms-2">Logout from Spotify</span>
    </button>
  </div>
  <div *ngIf="accessToken">
    <div id="top-artists-container" class="section-container">
      <div class="section-header text-center">
        <button id="export-artists-btn" class="btn btn-export" (click)="exportArtistsAsImage()">Export Artists as Image</button>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2 class="text-white text-center">Top Artists (Last 6 months)</h2>
          <div class="d-flex flex-wrap justify-content-center podium-container" id="top-artists">
            <div class="artist-podium" *ngIf="topArtists.length > 2">
              <div class="podium-second">
                <div class="artist-card text-center">
                  <div class="artist-picture second-place" [style.background-image]="'url(' + topArtists[1].images[0]?.url + ')'"></div>
                  <div class="artist-info mt-2">
                    <strong class="artist-name">{{ topArtists[1].name }}</strong>
                  </div>
                </div>
              </div>
              <div class="podium-first">
                <div class="artist-card text-center">
                  <div class="crown">ðŸ‘‘</div>
                  <div class="artist-picture first-place" [style.background-image]="'url(' + topArtists[0].images[0]?.url + ')'"></div>
                  <div class="artist-info mt-2">
                    <strong class="artist-name">{{ topArtists[0].name }}</strong>
                  </div>
                </div>
              </div>
              <div class="podium-third">
                <div class="artist-card text-center">
                  <div class="artist-picture third-place" [style.background-image]="'url(' + topArtists[2].images[0]?.url + ')'"></div>
                  <div class="artist-info mt-2">
                    <strong class="artist-name">{{ topArtists[2].name }}</strong>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex flex-wrap justify-content-center mt-5">
            <div class="artist-card text-center" *ngFor="let artist of topArtists.slice(3); let i = index">
              <div class="rank">{{ i + 4 }}</div>
              <div class="artist-picture" [style.background-image]="'url(' + artist.images[0]?.url + ')'"></div>
              <div class="artist-info mt-2">
                <strong class="artist-name">{{ artist.name }}</strong>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="top-tracks-container" class="section-container mt-5">
      <div class="section-header text-center">
        <button id="export-tracks-btn" class="btn btn-export" (click)="exportTracksAsImage()">Export Tracks as Image</button>
      </div>
      <div class="row">
        <div class="col-md-12">
          <h2 class="text-white text-center">Top Tracks (Last 6 months)</h2>
          <div class="d-flex flex-wrap justify-content-center" id="top-tracks">
            <div class="track-card" *ngFor="let track of topTracks; let i = index">
              <div class="track-picture" [style.background-image]="'url(' + track.album.images[0]?.url + ')'"></div>
              <div class="track-info ml-3">
                <strong class="track-name">{{ track.name }}</strong>
                <div class="track-artist">{{ track.artists[0]?.name }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
